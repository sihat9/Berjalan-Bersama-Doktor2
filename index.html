<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Pendaftaran Berjalan Bersama Doktor</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {font-family: "Inter", sans-serif; background:#f8f9fa;}
    .hero {background:#198754; color:#fff; padding:2rem 0;}
    .hero h1 {font-size:2rem;}
    .form-section, .tentatif-section {padding:2rem 0;}
  </style>
</head>
<body>
  <!-- Hero -->
  <header class="hero text-center">
    <div class="container">
      <h1>Berjalan Bersama Doktor</h1>
      <p class="lead mb-0">Daftar sekarang dan jadi antara yang terawal untuk menebus hadiah eksklusif!</p>
    </div>
  </header>

  <!-- Form Pendaftaran -->
  <section class="form-section">
    <div class="container">
      <div class="card shadow-sm">
        <div class="card-header bg-success text-white">Borang Pendaftaran</div>
        <div class="card-body">
          <form id="registerForm" novalidate>
            <div class="mb-3">
              <label class="form-label">Nama Penuh Peserta</label>
              <input type="text" class="form-control" id="nama" required>
            </div>
            <div class="mb-3">
              <label class="form-label">No. Kad Pengenalan (IC)</label>
              <input type="text" class="form-control" id="ic" maxlength="12" pattern="\d{12}" placeholder="Contoh: 991231145678" required>
              <div class="form-text">Masukkan 12 digit tanpa sempang.</div>
            </div>
            <div class="mb-3">
              <label class="form-label">No. Telefon</label>
              <div class="input-group">
                <span class="input-group-text">6</span>
                <input type="tel" class="form-control" id="phone" pattern="\d{10,11}" placeholder="0123456789" required>
              </div>
            </div>
            <div class="mb-3">
              <label class="form-label">Alamat</label>
              <textarea class="form-control" id="alamat" rows="2" required></textarea>
            </div>
            <button type="submit" class="btn btn-success w-100">Hantar Pendaftaran</button>
          </form>
          <div id="alertPlaceholder" class="pt-3"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Tentatif Program -->
  <section class="tentatif-section bg-light">
    <div class="container">
      <h2 class="h4 mb-3">Tentatif Program</h2>
      <table class="table table-striped">
        <tbody>
          <tr><th>7:30 pagi</th><td>Pendaftaran Peserta</td></tr>
          <tr><th>8:00 pagi</th><td>Ucapan Aluan &amp; Senaman Ringkas</td></tr>
          <tr><th>8:30 pagi</th><td>Berjalan Bersama Doktor bermula</td></tr>
          <tr><th>10:00 pagi</th><td>Cabutan Bertuah &amp; Penyampaian Hadiah</td></tr>
          <tr><th>10:30 pagi</th><td>Penutup &amp; Bersurai</td></tr>
        </tbody>
      </table>
      <p class="fst-italic text-muted">* Hadiah boleh ditebus di kaunter pendaftaran Klinik SihatSokmo oleh 100 peserta pertama yang mendaftar.</p>
    </div>
  </section>

  <footer class="text-center py-3 small bg-white">
    &copy; 2025 Klinik SihatSokmo. Dibangunkan dengan &hearts; menggunakan GitHub Pages.
  </footer>

  <!-- Scripts -->
  <script>
    const form = document.getElementById('registerForm');
    const alertPlaceholder = document.getElementById('alertPlaceholder');
    const scriptURL = 'https://script.google.com/macros/s/AKfycbwRSq4IDDG59UimVrhA226--hAjbJ0tWocnKvoglY706Bvj6R3jOei3iG8IqtpIUwBC/exec';

    function showAlert(message, type = 'success') {
      alertPlaceholder.innerHTML = `
        <div class="alert alert-${type} alert-dismissible" role="alert">
          ${message}
          <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>`;
    }

    form.addEventListener('submit', e => {
      e.preventDefault();
      if (!form.checkValidity()) { form.classList.add('was-validated'); return; }

      const data = {
        nama: document.getElementById('nama').value.trim(),
        ic: document.getElementById('ic').value.trim(),
        phone: '6' + document.getElementById('phone').value.trim(),
        alamat: document.getElementById('alamat').value.trim()
      };

      fetch(scriptURL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      })
      .then(res => res.json())
      .then(d => {
        if (d.result === 'success') {
          showAlert('Pendaftaran berjaya! Jumpa anda di hari acara.');
          form.reset();
        } else {
          throw new Error('Ralat semasa menghantar.');
        }
      })
      .catch(err => showAlert(err.message, 'danger'));
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
